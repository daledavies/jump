(()=>{"use strict";var e={729:e=>{var t=Object.prototype.hasOwnProperty,s="~";function n(){}function i(e,t,s){this.fn=e,this.context=t,this.once=s||!1}function r(e,t,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var c=new i(n,r||e,o),h=s?s+t:t;return e._events[h]?e._events[h].fn?e._events[h]=[e._events[h],c]:e._events[h].push(c):(e._events[h]=c,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function c(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(s=!1)),c.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(s?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},c.prototype.listeners=function(e){var t=s?s+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,r=n.length,o=new Array(r);i<r;i++)o[i]=n[i].fn;return o},c.prototype.listenerCount=function(e){var t=s?s+e:e,n=this._events[t];return n?n.fn?1:n.length:0},c.prototype.emit=function(e,t,n,i,r,o){var c=s?s+e:e;if(!this._events[c])return!1;var h,a,l=this._events[c],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,r),!0;case 6:return l.fn.call(l.context,t,n,i,r,o),!0}for(a=1,h=new Array(u-1);a<u;a++)h[a-1]=arguments[a];l.fn.apply(l.context,h)}else{var d,g=l.length;for(a=0;a<g;a++)switch(l[a].once&&this.removeListener(e,l[a].fn,void 0,!0),u){case 1:l[a].fn.call(l[a].context);break;case 2:l[a].fn.call(l[a].context,t);break;case 3:l[a].fn.call(l[a].context,t,n);break;case 4:l[a].fn.call(l[a].context,t,n,i);break;default:if(!h)for(d=1,h=new Array(u-1);d<u;d++)h[d-1]=arguments[d];l[a].fn.apply(l[a].context,h)}}return!0},c.prototype.on=function(e,t,s){return r(this,e,t,s,!1)},c.prototype.once=function(e,t,s){return r(this,e,t,s,!0)},c.prototype.removeListener=function(e,t,n,i){var r=s?s+e:e;if(!this._events[r])return this;if(!t)return o(this,r),this;var c=this._events[r];if(c.fn)c.fn!==t||i&&!c.once||n&&c.context!==n||o(this,r);else{for(var h=0,a=[],l=c.length;h<l;h++)(c[h].fn!==t||i&&!c[h].once||n&&c[h].context!==n)&&a.push(c[h]);a.length?this._events[r]=1===a.length?a[0]:a:o(this,r)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=s?s+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=s,c.EventEmitter=c,e.exports=c}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,s),r.exports}(()=>{class e{constructor(e,t=!1,s=!1){this.set_utc_shift(),this.contentintervalid=null,this.eventemitter=e,this.ampm=t,this.forcelocaltime=s}set_utc_shift(e=0){this.utcshift=e,this.shiftedtimestamp=(new Date).getTime()+this.utcshift,this.shifteddate=new Date(this.shiftedtimestamp)}get_formatted_time(){let e=this.shifteddate.getUTCHours(),t=String(this.shifteddate.getUTCMinutes()).padStart(2,"0");if(this.forcelocaltime&&(e=(new Date).getHours(),t=String((new Date).getMinutes()).padStart(2,"0")),!this.ampm)return String(e).padStart(2,"0")+":"+t;const s=e<=12?"AM":"PM";return e=(e+11)%12+1,e+":"+t+"<span>"+s+"</span>"}get_hour(){return this.forcelocaltime?(new Date).getHours():this.shifteddate.getUTCHours()}update_time(){this.set_utc_shift(this.utcshift),this.eventemitter.emit("clock-updated",{formatted_time:this.get_formatted_time(),hour:this.get_hour(),utcshift:this.utcshift})}run(e){this.contentintervalid&&clearInterval(this.contentintervalid),this.update_time(),this.contentintervalid=setInterval((()=>{this.update_time()}),e)}}const t=s(729);function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===d(e)}const i=1/0;function r(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-i?"-0":t}(e)}function o(e){return"string"==typeof e}function c(e){return"number"==typeof e}function h(e){return!0===e||!1===e||function(e){return a(e)&&null!==e}(e)&&"[object Boolean]"==d(e)}function a(e){return"object"==typeof e}function l(e){return null!=e}function u(e){return!e.trim().length}function d(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const g=e=>`Invalid value for key ${e}`,f=e=>`Pattern length exceeds max of ${e}.`,m=e=>`Missing ${e} property in key`,p=e=>`Property 'weight' in key '${e}' must be a positive integer`,v=Object.prototype.hasOwnProperty;class y{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let s=w(e);t+=s.weight,this._keys.push(s),this._keyMap[s.id]=s,t+=s.weight})),this._keys.forEach((e=>{e.weight/=t}))}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function w(e){let t=null,s=null,i=null,r=1,c=null;if(o(e)||n(e))i=e,t=M(e),s=_(e);else{if(!v.call(e,"name"))throw new Error(m("name"));const n=e.name;if(i=n,v.call(e,"weight")&&(r=e.weight,r<=0))throw new Error(p(n));t=M(n),s=_(n),c=e.getFn}return{path:t,id:s,weight:r,src:i,getFn:c}}function M(e){return n(e)?e:e.split(".")}function _(e){return n(e)?e.join("."):e}var x={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(e,t){let s=[],i=!1;const a=(e,t,u)=>{if(l(e))if(t[u]){const d=e[t[u]];if(!l(d))return;if(u===t.length-1&&(o(d)||c(d)||h(d)))s.push(r(d));else if(n(d)){i=!0;for(let e=0,s=d.length;e<s;e+=1)a(d[e],t,u+1)}else t.length&&a(d,t,u+1)}else s.push(e)};return a(e,o(t)?t.split("."):t,0),i?s:s[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const L=/[^ ]+/g;class b{constructor({getFn:e=x.getFn,fieldNormWeight:t=x.fieldNormWeight}={}){this.norm=function(e=1,t=3){const s=new Map,n=Math.pow(10,t);return{get(t){const i=t.match(L).length;if(s.has(i))return s.get(i);const r=1/Math.pow(i,.5*e),o=parseFloat(Math.round(r*n)/n);return s.set(i,o),o},clear(){s.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,o(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const t=this.size();o(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,s=this.size();t<s;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!l(e)||u(e))return;let s={v:e,i:t,n:this.norm.get(e)};this.records.push(s)}_addObject(e,t){let s={i:t,$:{}};this.keys.forEach(((t,i)=>{let r=t.getFn?t.getFn(e):this.getFn(e,t.path);if(l(r))if(n(r)){let e=[];const t=[{nestedArrIndex:-1,value:r}];for(;t.length;){const{nestedArrIndex:s,value:i}=t.pop();if(l(i))if(o(i)&&!u(i)){let t={v:i,i:s,n:this.norm.get(i)};e.push(t)}else n(i)&&i.forEach(((e,s)=>{t.push({nestedArrIndex:s,value:e})}))}s.$[i]=e}else if(o(r)&&!u(r)){let e={v:r,n:this.norm.get(r)};s.$[i]=e}})),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function k(e,t,{getFn:s=x.getFn,fieldNormWeight:n=x.fieldNormWeight}={}){const i=new b({getFn:s,fieldNormWeight:n});return i.setKeys(e.map(w)),i.setSources(t),i.create(),i}function S(e,{errors:t=0,currentLocation:s=0,expectedLocation:n=0,distance:i=x.distance,ignoreLocation:r=x.ignoreLocation}={}){const o=t/e.length;if(r)return o;const c=Math.abs(n-s);return i?o+c/i:c?1:o}const C=32;function E(e,t,s,{location:n=x.location,distance:i=x.distance,threshold:r=x.threshold,findAllMatches:o=x.findAllMatches,minMatchCharLength:c=x.minMatchCharLength,includeMatches:h=x.includeMatches,ignoreLocation:a=x.ignoreLocation}={}){if(t.length>C)throw new Error(f(C));const l=t.length,u=e.length,d=Math.max(0,Math.min(n,u));let g=r,m=d;const p=c>1||h,v=p?Array(u):[];let y;for(;(y=e.indexOf(t,m))>-1;){let e=S(t,{currentLocation:y,expectedLocation:d,distance:i,ignoreLocation:a});if(g=Math.min(e,g),m=y+l,p){let e=0;for(;e<l;)v[y+e]=1,e+=1}}m=-1;let w=[],M=1,_=l+u;const L=1<<l-1;for(let n=0;n<l;n+=1){let r=0,c=_;for(;r<c;){S(t,{errors:n,currentLocation:d+c,expectedLocation:d,distance:i,ignoreLocation:a})<=g?r=c:_=c,c=Math.floor((_-r)/2+r)}_=c;let h=Math.max(1,d-c+1),f=o?u:Math.min(d+c,u)+l,y=Array(f+2);y[f+1]=(1<<n)-1;for(let r=f;r>=h;r-=1){let o=r-1,c=s[e.charAt(o)];if(p&&(v[o]=+!!c),y[r]=(y[r+1]<<1|1)&c,n&&(y[r]|=(w[r+1]|w[r])<<1|1|w[r+1]),y[r]&L&&(M=S(t,{errors:n,currentLocation:o,expectedLocation:d,distance:i,ignoreLocation:a}),M<=g)){if(g=M,m=o,m<=d)break;h=Math.max(1,2*d-m)}}if(S(t,{errors:n+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:a})>g)break;w=y}const b={isMatch:m>=0,score:Math.max(.001,M)};if(p){const e=function(e=[],t=x.minMatchCharLength){let s=[],n=-1,i=-1,r=0;for(let o=e.length;r<o;r+=1){let o=e[r];o&&-1===n?n=r:o||-1===n||(i=r-1,i-n+1>=t&&s.push([n,i]),n=-1)}return e[r-1]&&r-n>=t&&s.push([n,r-1]),s}(v,c);e.length?h&&(b.indices=e):b.isMatch=!1}return b}function A(e){let t={};for(let s=0,n=e.length;s<n;s+=1){const i=e.charAt(s);t[i]=(t[i]||0)|1<<n-s-1}return t}class N{constructor(e,{location:t=x.location,threshold:s=x.threshold,distance:n=x.distance,includeMatches:i=x.includeMatches,findAllMatches:r=x.findAllMatches,minMatchCharLength:o=x.minMatchCharLength,isCaseSensitive:c=x.isCaseSensitive,ignoreLocation:h=x.ignoreLocation}={}){if(this.options={location:t,threshold:s,distance:n,includeMatches:i,findAllMatches:r,minMatchCharLength:o,isCaseSensitive:c,ignoreLocation:h},this.pattern=c?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const a=(e,t)=>{this.chunks.push({pattern:e,alphabet:A(e),startIndex:t})},l=this.pattern.length;if(l>C){let e=0;const t=l%C,s=l-t;for(;e<s;)a(this.pattern.substr(e,C),e),e+=C;if(t){const e=l-C;a(this.pattern.substr(e),e)}}else a(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:s}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return s&&(t.indices=[[0,e.length-1]]),t}const{location:n,distance:i,threshold:r,findAllMatches:o,minMatchCharLength:c,ignoreLocation:h}=this.options;let a=[],l=0,u=!1;this.chunks.forEach((({pattern:t,alphabet:d,startIndex:g})=>{const{isMatch:f,score:m,indices:p}=E(e,t,d,{location:n+g,distance:i,threshold:r,findAllMatches:o,minMatchCharLength:c,includeMatches:s,ignoreLocation:h});f&&(u=!0),l+=m,f&&p&&(a=[...a,...p])}));let d={isMatch:u,score:u?l/this.chunks.length:1};return u&&s&&(d.indices=a),d}}class I{constructor(e){this.pattern=e}static isMultiMatch(e){return q(e,this.multiRegex)}static isSingleMatch(e){return q(e,this.singleRegex)}search(){}}function q(e,t){const s=e.match(t);return s?s[1]:null}class P extends I{constructor(e,{location:t=x.location,threshold:s=x.threshold,distance:n=x.distance,includeMatches:i=x.includeMatches,findAllMatches:r=x.findAllMatches,minMatchCharLength:o=x.minMatchCharLength,isCaseSensitive:c=x.isCaseSensitive,ignoreLocation:h=x.ignoreLocation}={}){super(e),this._bitapSearch=new N(e,{location:t,threshold:s,distance:n,includeMatches:i,findAllMatches:r,minMatchCharLength:o,isCaseSensitive:c,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class O extends I{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,s=0;const n=[],i=this.pattern.length;for(;(t=e.indexOf(this.pattern,s))>-1;)s=t+i,n.push([t,s-1]);const r=!!n.length;return{isMatch:r,score:r?0:1,indices:n}}}const $=[class extends I{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},O,class extends I{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends I{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends I{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends I{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends I{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},P],R=$.length,J=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,U="|";const F=new Set([P.type,O.type]);class j{constructor(e,{isCaseSensitive:t=x.isCaseSensitive,includeMatches:s=x.includeMatches,minMatchCharLength:n=x.minMatchCharLength,ignoreLocation:i=x.ignoreLocation,findAllMatches:r=x.findAllMatches,location:o=x.location,threshold:c=x.threshold,distance:h=x.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:s,minMatchCharLength:n,findAllMatches:r,ignoreLocation:i,location:o,threshold:c,distance:h},this.pattern=t?e:e.toLowerCase(),this.query=function(e,t={}){return e.split(U).map((e=>{let s=e.trim().split(J).filter((e=>e&&!!e.trim())),n=[];for(let e=0,i=s.length;e<i;e+=1){const i=s[e];let r=!1,o=-1;for(;!r&&++o<R;){const e=$[o];let s=e.isMultiMatch(i);s&&(n.push(new e(s,t)),r=!0)}if(!r)for(o=-1;++o<R;){const e=$[o];let s=e.isSingleMatch(i);if(s){n.push(new e(s,t));break}}}return n}))}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:n}=this.options;e=n?e:e.toLowerCase();let i=0,r=[],o=0;for(let n=0,c=t.length;n<c;n+=1){const c=t[n];r.length=0,i=0;for(let t=0,n=c.length;t<n;t+=1){const n=c[t],{isMatch:h,indices:a,score:l}=n.search(e);if(!h){o=0,i=0,r.length=0;break}if(i+=1,o+=l,s){const e=n.constructor.type;F.has(e)?r=[...r,...a]:r.push(a)}}if(i){let e={isMatch:!0,score:o/i};return s&&(e.indices=r),e}}return{isMatch:!1,score:1}}}const T=[];function H(e,t){for(let s=0,n=T.length;s<n;s+=1){let n=T[s];if(n.condition(e,t))return new n(e,t)}return new N(e,t)}const W="$and",z="$or",D={PATH:"$path",PATTERN:"$val"},K=e=>!(!e[W]&&!e[z]),V=e=>!!e[D.PATH],B=e=>!n(e)&&a(e)&&!K(e),Q=e=>({[W]:Object.keys(e).map((t=>({[t]:e[t]})))});function G(e,t,{auto:s=!0}={}){const i=e=>{let r=Object.keys(e);const c=V(e);if(!c&&r.length>1&&!K(e))return i(Q(e));if(B(e)){const n=c?e[D.PATH]:r[0],i=c?e[D.PATTERN]:e[n];if(!o(i))throw new Error(g(n));const h={keyId:_(n),pattern:i};return s&&(h.searcher=H(i,t)),h}let h={children:[],operator:r[0]};return r.forEach((t=>{const s=e[t];n(s)&&s.forEach((e=>{h.children.push(i(e))}))})),h};return K(e)||(e=Q(e)),i(e)}function X(e,t){const s=e.matches;t.matches=[],l(s)&&s.forEach((e=>{if(!l(e.indices)||!e.indices.length)return;const{indices:s,value:n}=e;let i={indices:s,value:n};e.key&&(i.key=e.key.src),e.idx>-1&&(i.refIndex=e.idx),t.matches.push(i)}))}function Y(e,t){t.score=e.score}class Z{constructor(e,t={},s){this.options={...x,...t},this.options.useExtendedSearch,this._keyStore=new y(this.options.keys),this.setCollection(e,s)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof b))throw new Error("Incorrect 'index' type");this._myIndex=t||k(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){l(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=(()=>!1)){const t=[];for(let s=0,n=this._docs.length;s<n;s+=1){const i=this._docs[s];e(i,s)&&(this.removeAt(s),s-=1,n-=1,t.push(i))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:s,includeScore:n,shouldSort:i,sortFn:r,ignoreFieldNorm:h}=this.options;let a=o(e)?o(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=x.ignoreFieldNorm}){e.forEach((e=>{let s=1;e.matches.forEach((({key:e,norm:n,score:i})=>{const r=e?e.weight:null;s*=Math.pow(0===i&&r?Number.EPSILON:i,(r||1)*(t?1:n))})),e.score=s}))}(a,{ignoreFieldNorm:h}),i&&a.sort(r),c(t)&&t>-1&&(a=a.slice(0,t)),function(e,t,{includeMatches:s=x.includeMatches,includeScore:n=x.includeScore}={}){const i=[];return s&&i.push(X),n&&i.push(Y),e.map((e=>{const{idx:s}=e,n={item:t[s],refIndex:s};return i.length&&i.forEach((t=>{t(e,n)})),n}))}(a,this._docs,{includeMatches:s,includeScore:n})}_searchStringList(e){const t=H(e,this.options),{records:s}=this._myIndex,n=[];return s.forEach((({v:e,i:s,n:i})=>{if(!l(e))return;const{isMatch:r,score:o,indices:c}=t.searchIn(e);r&&n.push({item:e,idx:s,matches:[{score:o,value:e,norm:i,indices:c}]})})),n}_searchLogical(e){const t=G(e,this.options),s=(e,t,n)=>{if(!e.children){const{keyId:s,searcher:i}=e,r=this._findMatches({key:this._keyStore.get(s),value:this._myIndex.getValueForItemAtKeyId(t,s),searcher:i});return r&&r.length?[{idx:n,item:t,matches:r}]:[]}const i=[];for(let r=0,o=e.children.length;r<o;r+=1){const o=e.children[r],c=s(o,t,n);if(c.length)i.push(...c);else if(e.operator===W)return[]}return i},n=this._myIndex.records,i={},r=[];return n.forEach((({$:e,i:n})=>{if(l(e)){let o=s(t,e,n);o.length&&(i[n]||(i[n]={idx:n,item:e,matches:[]},r.push(i[n])),o.forEach((({matches:e})=>{i[n].matches.push(...e)})))}})),r}_searchObjectList(e){const t=H(e,this.options),{keys:s,records:n}=this._myIndex,i=[];return n.forEach((({$:e,i:n})=>{if(!l(e))return;let r=[];s.forEach(((s,n)=>{r.push(...this._findMatches({key:s,value:e[n],searcher:t}))})),r.length&&i.push({idx:n,item:e,matches:r})})),i}_findMatches({key:e,value:t,searcher:s}){if(!l(t))return[];let i=[];if(n(t))t.forEach((({v:t,i:n,n:r})=>{if(!l(t))return;const{isMatch:o,score:c,indices:h}=s.searchIn(t);o&&i.push({score:c,key:e,value:t,idx:n,norm:r,indices:h})}));else{const{v:n,n:r}=t,{isMatch:o,score:c,indices:h}=s.searchIn(n);o&&i.push({score:c,key:e,value:n,norm:r,indices:h})}return i}}Z.version="6.6.2",Z.createIndex=k,Z.parseIndex=function(e,{getFn:t=x.getFn,fieldNormWeight:s=x.fieldNormWeight}={}){const{keys:n,records:i}=e,r=new b({getFn:t,fieldNormWeight:s});return r.setKeys(n),r.setIndexRecords(i),r},Z.config=x,Z.parseQuery=G,function(...e){T.push(...e)}(j);class ee{constructor(e,t){this.hour=e,this.greetings={0:t.greetings.goodmorning,12:t.greetings.goodafternoon,16:t.greetings.goodevening,19:t.greetings.goodnight}}get_greeting(){let e=Object.keys(this.greetings).reverse();for(let t of e)if(this.hour>=t)return this.greetings[t]}}class te{constructor(e,t,s,n,i){this.containerelm=s,this.eventemitter=n,this.inputelm=t,this.suggestionslistelm=s.querySelector(".suggestion-list"),this.searchproviderlist=null,this.searchengines=e,this.strings=i}build_searchprovider_list_elm(e){const t=document.createElement("ul");return t.classList.add("searchproviders"),t.setAttribute("tabindex",-1),this.searchengines.forEach((s=>{const n=document.createElement("li");n.setAttribute("tabindex",-1),n.innerHTML='<a target="_blank" rel="noopener"                 href="'+s.url+encodeURIComponent(e)+'">'+this.strings.search.searchon[s.name]+"</a>",t.appendChild(n)})),t.addEventListener("keyup",(e=>{switch(e.code){case"ArrowUp":if(document.activeElement==e.target.parentNode.parentNode.firstChild.firstChild){this.inputelm.focus();break}document.activeElement.parentNode.previousSibling.firstChild.focus();break;case"ArrowDown":if(document.activeElement==e.target.parentNode.parentNode.lastChild.firstChild){const t=document.querySelector(".suggestionholder .suggestions");t?t.firstChild.firstChild.focus():e.target.parentNode.parentNode.firstChild.firstChild.focus();break}document.activeElement.parentNode.nextSibling.firstChild.focus()}})),t}build_suggestion_list_elm(e){const t=document.createElement("ul");return t.classList.add("suggestions"),t.setAttribute("tabindex",-1),e.forEach((e=>{const s=document.createElement("li");s.setAttribute("tabindex",-1),s.innerHTML='<a target="_blank" rel="noopener" href="'+e.url+'">                <img class="icon" src="'+e.iconurl+'"><span class="name">'+e.name+"</span>",t.appendChild(s)})),t.addEventListener("keyup",(e=>{switch(e.code){case"ArrowUp":if(document.activeElement==e.target.parentNode.parentNode.firstChild.firstChild){this.searchproviderlist.lastChild.firstChild.focus();break}document.activeElement.parentNode.previousSibling.firstChild.focus();break;case"ArrowDown":if(document.activeElement==e.target.parentNode.parentNode.lastChild.firstChild){this.searchproviderlist.firstChild.firstChild.focus();break}document.activeElement.parentNode.nextSibling.firstChild.focus()}})),t}replace(e){const t=this.build_suggestion_list_elm(e),s=document.createElement("span");if(s.classList.add("suggestionholder"),""!==this.inputelm.value){const e=document.createElement("span");e.classList.add("suggestiontitle"),e.innerHTML=this.strings.search.search,s.appendChild(e),this.searchproviderlist=this.build_searchprovider_list_elm(this.inputelm.value),s.appendChild(this.searchproviderlist)}if(t.childNodes.length>0){const e=document.createElement("span");e.classList.add("suggestiontitle"),e.innerHTML=this.strings.search.sites,s.appendChild(e),s.appendChild(t)}if(s.childNodes.length>0)this.containerelm.classList.add("suggestions"),this.suggestionslistelm.replaceChildren(s);else{this.containerelm.classList.remove("suggestions");let e=this.containerelm.querySelector(".suggestionholder");e&&e.remove()}}}class se{constructor(e){this.eventemitter=e}fetch_owm_data(e){let t=JUMP.wwwurl+"/api/weather/"+JUMP.token+"/";e.length&&(t+=e[0]+"/"+e[1]+"/"),fetch(t).then((e=>{if(401===e.status)return console.error("JUMP ERROR: The OWM API key is invalid, check config.php"),void this.eventemitter.emit("weather-error");e.json().then((e=>{if(e.error)return console.error("JUMP ERROR: There was an issue with the OWM API... "+e.error),void this.eventemitter.emit("weather-error");var t="night";e.dt>e.sys.sunrise&&e.dt<e.sys.sunset&&(t="day"),this.eventemitter.emit("weather-loaded",{locationcode:e.id,locationname:e.name,temp:Math.ceil(e.main.temp)+"&deg;"+(JUMP.metrictemp?"C":"F"),description:e.weather[0].main,iconclass:"wi-owm-"+t+"-"+e.weather[0].id,timezoneshift:1e3*e.timezone})}))}))}}console.info("%c\n----------------------------------\n\n     ██ ██    ██ ███    ███ ██████\n     ██ ██    ██ ████  ████ ██   ██\n     ██ ██    ██ ██ ████ ██ ██████\n██   ██ ██    ██ ██  ██  ██ ██\n █████   ██████  ██      ██ ██\n\nhttps://github.com/daledavies/jump\n\n----------------------------------\n\n     Jump v1.3.2 (1681407685)\n\n----------------------------------\n\n","font-family:monospace"),(new class{constructor(){this.latlong=[],this.storage=window.localStorage,this.clockfrequency=1e4,this.weatherfrequency=3e5,this.timezoneshift=0,this.metrictemp=JUMP.metrictemp,this.greetingelm=document.querySelector(".greeting .chosen"),this.holderelm=document.querySelector(".time-weather"),this.tempelm=this.holderelm.querySelector(".weather-info .temp"),this.weatherdescelm=this.holderelm.querySelector(".weather-info .desc"),this.timeelm=this.holderelm.querySelector(".time"),this.weatherelm=this.holderelm.querySelector(".weather"),this.weathericonelm=this.holderelm.querySelector(".weather-icon"),this.clientlocationelm=document.querySelector(".useclientlocation"),this.showtagsbuttonelm=document.querySelector(".show-tags"),this.tagselectorelm=document.querySelector(".tags"),this.tagsselectorclosebuttonelm=document.querySelector(".tags .close"),this.showsearchbuttonelm=document.querySelector(".search"),(this.lastrequestedlocation=this.storage.getItem("lastrequestedlocation"))&&(this.latlong=JSON.parse(this.lastrequestedlocation)),this.eventemitter=new t,this.clock=new e(this.eventemitter,!!JUMP.ampmclock,!JUMP.owmapikey),this.weather=new se(this.eventemitter),this.showsearchbuttonelm&&(this.searchclosebuttonelm=this.showsearchbuttonelm.querySelector(".close"),this.fuse=new Z(JSON.parse(JUMP.sites),{threshold:.3,keys:["name","tags","url"]})),this.strings=JSON.parse(JUMP.strings)}init(){if(JUMP.unsplash){const e=document.querySelector(".background");JUMP.unsplashcolor&&(e.style.backgroundColor=JUMP.unsplashcolor),fetch(JUMP.wwwurl+"/api/unsplash/"+JUMP.token+"/").then((e=>e.json())).then((t=>{t.error?console.error("JUMP ERROR: There was an issue with the Unsplash API... "+t.error):(e.style.backgroundImage='url("'+t.imagedatauri+'")',document.querySelector(".unsplash").innerHTML=t.attribution)}))}JUMP.checkstatus&&fetch(JUMP.wwwurl+"/api/status/"+JUMP.token+"/").then((e=>e.json())).then((e=>{for(const[t,s]of Object.entries(e)){const e=document.querySelector("#"+t);if(e&&(e.classList.add(s),"online"!==s)){const t=e.querySelector("a");t.title="("+this.strings.status.status+": "+this.strings.status[s]+") "+t.title}}})),this.add_event_listeners(),JUMP.owmapikey?(this.weather.fetch_owm_data(this.latlong),setInterval((()=>{this.weather.fetch_owm_data(this.latlong)}),this.weatherfrequency)):this.eventemitter.emit("show-content")}add_event_listeners(){if(this.eventemitter.on("weather-loaded",(e=>{this.timezoneshift=e.timezoneshift,this.weatherelm.href="https://openweathermap.org/city/"+e.locationcode,this.weathericonelm.classList.add(e.iconclass),this.clientlocationelm.innerHTML=e.locationname,this.tempelm.innerHTML=e.temp,this.weatherdescelm.innerHTML=e.description,this.clientlocationelm.classList.add("enable"),this.eventemitter.emit("show-content")})),this.eventemitter.on("weather-error",(e=>{this.eventemitter.emit("show-content")})),this.eventemitter.on("clock-updated",(e=>{if(null!=this.timeelm&&(this.timeelm.innerHTML=e.formatted_time),null!=this.greetingelm){let t=new ee(e.hour,this.strings);this.greetingelm.innerHTML=t.get_greeting()}})),this.eventemitter.on("show-content",(()=>{this.set_clock(),this.show_content()})),this.clientlocationelm.addEventListener("click",(e=>{navigator.geolocation.getCurrentPosition((e=>{this.latlong=[e.coords.latitude,e.coords.longitude],this.storage.setItem("lastrequestedlocation",JSON.stringify(this.latlong)),this.weather.fetch_owm_data(this.latlong)}),(e=>{console.error(e.message)}),{enableHighAccuracy:!0})})),this.showtagsbuttonelm&&this.showtagsbuttonelm.addEventListener("click",(e=>{this.tagselectorelm.classList.add("enable"),e.preventDefault()})),this.tagsselectorclosebuttonelm&&this.tagsselectorclosebuttonelm.addEventListener("click",(e=>{this.tagselectorelm.classList.remove("enable")})),this.showsearchbuttonelm){const e=document.querySelector(".search-form input");this.searchsuggestions=new te(JSON.parse(JUMP.searchengines),e,this.showsearchbuttonelm,this.eventemitter,this.strings),this.showsearchbuttonelm.addEventListener("click",(t=>{t.target.classList.contains("open")||(this.showsearchbuttonelm.classList.add("open"),e.focus())})),document.addEventListener("keyup",(t=>{t.ctrlKey&&t.shiftKey&&"Slash"==t.code&&(this.showsearchbuttonelm.classList.contains("open")?this.search_close():(this.showsearchbuttonelm.classList.add("open"),e.focus()))})),this.searchclosebuttonelm.addEventListener("click",(e=>{e.stopPropagation(),this.search_close()})),e.addEventListener("keyup",(t=>{let s=document.querySelector(".suggestion-list .searchproviders");if("ArrowDown"===t.code)return void(s&&s.childNodes.length&&s.firstChild.firstChild.focus());let n=[],i=this.fuse.search(e.value);i.length=8,i.length>0&&i.forEach((e=>{n.push(e.item)})),this.searchsuggestions.replace(n)})),document.querySelector(".search-form").addEventListener("submit",(t=>{t.preventDefault(),""!=e.value&&document.querySelector(".searchproviders li a").click()}))}}search_close(){let e=this.showsearchbuttonelm.querySelector(".suggestionholder");e&&e.remove(),this.showsearchbuttonelm.classList.remove("suggestions"),document.querySelector(".search").classList.remove("open"),document.querySelector(".search-form input").value=""}show_content(){document.querySelectorAll(".hidden").forEach((function(e){e.classList.remove("hidden")}))}set_clock(){this.clock.set_utc_shift(this.timezoneshift),this.clock.run(this.clockfrequency)}}).init()})()})();